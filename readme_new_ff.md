# FireFly-BBS (Светлячок-BBS)

## Обзор проекта

FireFly-BBS — это расширение возможностей сети Meshtastic, представляющее собой многофункциональный бот для радиосетей. Проект включает BBS (доску объявлений) с интеграцией Telegram, веб-интерфейсом, играми и отслеживанием активов. Бот обрабатывает текстовые сообщения, обеспечивает связь и полезность через радиосеть, поддерживает ИИ-интеграцию и визуализацию сети.

Проект основан на Meshtastic и расширяет его функциональность с помощью различных инструментов и ИИ. Поддерживает оффлайн-работу и включает веб-UI для управления и визуализации.

## Ключевые особенности

- **Интеллектуальный ответчик**: Автоматические ответы на ключевые слова, триггеры и экстренные реакции.
- **Сетевые инструменты**: Тестирование сети, мониторинг узлов, определение онлайн/оффлайн.
- **Расширенное общение**: Почтовые сообщения, планировщик, хранение и пересылка, отправка на email/SMS.
- **ИИ и поиск данных**: Интеграция с Ollama LLM, поиск в Википедии, погодные данные, информация о спутниках.
- **Оповещения**: На основе местоположения, EAS (FEMA, NOAA, USGS), мониторинг радиочастот.
- **Отслеживание активов**: Контрольный список прибытия/убытия узлов.
- **Игры**: BlackJack, DopeWars, Lemonade Stand, викторина FCC/ARRL и другие.
- **Веб-интерфейс**: Визуализация маршрутов, гео-зонирование, триггеры, статистика.
- **Интеграция Telegram**: Связь через Telegram-бот.

## Системные требования

- **Операционная система**: Linux (рекомендуется Raspberry Pi), совместимая с Python 3.8+.
- **Аппаратное обеспечение**: Устройство Meshtastic (LoRa-радио), совместимое с Meshtastic protobuf API.
- **Программное обеспечение**: Python 3.8+, Meshtastic Python library, зависимости из requirements.txt.
- **Опционально**: Docker для контейнеризации, Ollama для ИИ, Hamlib для мониторинга радио.

## Установка

### Клонирование репозитория
```sh
git clone https://github.com/teletonn/ff-bbs
cd ff-bbs
```

### Автоматическая установка
Запустите скрипт install.sh для установки зависимостей и виртуальной среды:
```sh
./install.sh
```
Скрипт автоматизирует установку Python-зависимостей и настройку.

### Настройка Docker
Для удобной установки (особенно на Windows) используйте Docker:
- Следуйте инструкциям в `script/docker/README.md`.
- Используйте `script/docker/compose.yaml` для запуска контейнера.

### Ручная установка
Установите зависимости:
```sh
pip install -r requirements.txt
```
Скопируйте шаблон конфигурации:
```sh
cp config.template config.ini
```
Отредактируйте `config.ini` для настройки интерфейсов (serial, TCP, BLE), местоположения, модулей и т.д.

## Основные инструкции по использованию

1. **Запуск бота**:
   - В виртуальной среде: `./launch.sh`
   - Без среды: `python mesh_bot.py`

2. **Команды бота** (отправляйте в DM или канал):
   - `ping` — тест связи.
   - `cmd` — список команд.
   - `wx` — прогноз погоды.
   - `bbspost @узел #сообщение` — отправка почты.
   - `games` — список игр.
   - `askai вопрос` — запрос к ИИ.

3. **Веб-интерфейс**:
   - Запустите веб-сервер для доступа к UI по адресу `http://localhost:8000` (или настроенному порту).
   - Визуализируйте сеть, управляйте триггерами, просматривайте статистику.

4. **Конфигурация**:
   - Основные настройки в `config.ini`: интерфейсы, каналы, модули (BBS, игры, оповещения).
   - Включите нужные модули (например, `[bbs] enabled = True`).

5. **Интеграция Telegram**:
   - Настройте токен бота в конфигурации.
   - Используйте модули в `modules/meshgram_integration/` для обработки сообщений.

Для подробной документации по командам и настройкам см. полный README.md. Используйте ответственно, соблюдая местные правила для радиосвязи.